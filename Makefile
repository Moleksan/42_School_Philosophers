NAME = Philos

# –£–∫–∞–∑—ã–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∫ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ (–æ—Ç –ø–∞–ø–∫–∏, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è Makefile)
SRC = main/main.c main/valid.c main/init_philo.c main/debug.c main/init_simulation.c main/tools.c
OBJ = $(SRC:.c=.o)

# –ü–∞–ø–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
INC = include
CFLAGS = -Wextra -Werror -Wall -pthread -I $(INC)

# –£–±–∏—Ä–∞–µ–º –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∏—Å–ø–æ–ª–Ω–∏–º—ã–µ —Ñ–∞–π–ª—ã
RM = rm -rf
CC = gcc

# –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å
all: $(NAME)

# –ü—Ä–∞–≤–∏–ª–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
%.o: %.c
	@$(CC) $(CFLAGS) -c $< -o $@
	@echo "\033[0;35m‚öôÔ∏è Compiling: $< ‚öôÔ∏è\033[0m"

# –õ–∏–Ω–∫–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å–ø–æ–ª–Ω–∏–º—ã–π —Ñ–∞–π–ª
$(NAME): $(OBJ)
	@$(CC) $(OBJ) -o $(NAME) $(CFLAGS)
	@echo "\033[0;32müéâ $(NAME) ready to go! üöÄüéâ\033[0m"

# –û—á–∏—Å—Ç–∫–∞ –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
clean:
	@$(RM) $(OBJ)
	@rm -f debug_log.txt
	@echo "\033[0;34müßπ Object files cleaned! üßπ\033[0m"

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
fclean: clean
	@$(RM) $(NAME)
	@echo "\033[0;31m‚ùå Executable $(NAME) removed! ‚ùå\033[0m"

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
re: fclean all

# –£–±–∏—Ä–∞–µ–º —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–º–∏
.PHONY: all clean fclean re

